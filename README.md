# Image Compression Tool

Мощное приложение для сжатия изображений с интерактивным сравнением результатов. Приложение позволяет рекурсивно обрабатывать папки с фотографиями, сжимать их с настраиваемыми параметрами и сравнивать результаты.

## Основные возможности

### Сжатие изображений
- **Рекурсивная обработка папок**: Автоматически обрабатывает все изображения в выбранной папке и подпапках
- **Настраиваемые параметры сжатия**:
  - Качество JPEG (1-100%)
  - Максимальный размер по наибольшей стороне
  - Максимальный размер по наименьшей стороне
- **Сохранение структуры папок**: Создает сжатую копию с сохранением оригинальной структуры
- **Поддержка форматов**: JPEG, PNG, BMP, TIFF, WebP
- **Статистика сжатия**: Показывает размер до/после, процент сжатия, экономию места

### Сравнение изображений
- **Интерактивное сравнение**: Перетаскиваемый слайдер для сравнения левой и правой части изображений
- **Масштабирование**: 
  - Ctrl + Колесо мыши: Увеличение/уменьшение
  - Колесо мыши: Вертикальная прокрутка
  - Shift + Колесо мыши: Горизонтальная прокрутка
- **Панорамирование**: Перетаскивание для навигации по увеличенным изображениям
- **Карусель миниатюр**: Горизонтальная прокрутка всех пар изображений
- **Тонкий слайдер**: Минималистичный интерфейс без видимых линий

## Установка

1. Убедитесь, что у вас установлен Python 3.12 или новее
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Использование

### Запуск приложения

```bash
python main.py
```

### Процесс работы

1. **Выбор папки**: Нажмите "Select Input Directory" и выберите папку с изображениями
2. **Настройка параметров**:
   - **JPEG Quality**: Качество сжатия (рекомендуется 70-90)
   - **Max Largest Side**: Максимальный размер наибольшей стороны в пикселях
   - **Max Smallest Side**: Максимальный размер наименьшей стороны в пикселях
3. **Запуск сжатия**: Нажмите "Start Compression"
4. **Просмотр результатов**: После завершения нажмите "Compare Images"

### Сравнение изображений

После сжатия вы можете:
- **Перетаскивать желтый слайдер** для настройки разделения между изображениями
- **Использовать Ctrl + колесо мыши** для масштабирования
- **Кликать на миниатюры** в карусели для переключения между парами
- **Нажать "Reset View"** для возврата к исходному масштабу

## Структура файлов

```
photoViewer Cursor/
├── main.py                    # Основной файл приложения
├── image_compression.py       # Модуль сжатия изображений
├── image_comparison.py        # Модуль сравнения изображений
├── requirements.txt           # Зависимости Python
└── README.md                 # Этот файл
```

## Технические детали

### Модули

- **ImageCompressor**: Обработка и сжатие изображений с использованием Pillow
- **CompressionWorker**: Фоновая обработка для предотвращения блокировки UI
- **ComparisonViewer**: Интерактивный виджет для сравнения изображений
- **ThumbnailCarousel**: Карусель миниатюр для навигации

### Поддерживаемые форматы

- **Входные**: JPEG, PNG, BMP, TIFF, WebP
- **Выходные**: JPEG (с настраиваемым качеством), PNG, WebP

### Алгоритм сжатия

1. **Анализ размеров**: Проверка необходимости изменения размера
2. **Пропорциональное масштабирование**: Сохранение соотношения сторон
3. **Качественное сжатие**: Применение настроек качества для JPEG
4. **Оптимизация**: Использование встроенных алгоритмов оптимизации

## Требования

- Python 3.12+
- PyQt6 6.4.0+
- Pillow 10.0.0+

## Особенности

- **Модульная архитектура**: Разделение функциональности на независимые модули
- **Асинхронная обработка**: Сжатие в фоновом потоке без блокировки интерфейса
- **Современный UI**: Темная тема для сравнения, светлая для основного приложения
- **Подробное логирование**: Отслеживание процесса сжатия в реальном времени
- **Обработка ошибок**: Корректная обработка проблем с файлами и форматами

## Пример использования

1. Выберите папку с фотографиями (например, "Vacation_Photos")
2. Установите качество 85%, максимальную сторону 1920px, минимальную 1080px
3. Запустите сжатие
4. Получите папку "Vacation_Photos_compressed" со сжатыми изображениями
5. Откройте сравнение для оценки качества сжатия
